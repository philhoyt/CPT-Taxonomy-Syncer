(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,a=window.wp.element,n=window.wp.apiFetch;var o=e.n(n);const l=window.wp.i18n;function r(){const e=document.getElementById("cpt-tax-post-type-relationships-dashboard"),n=e?.dataset.postType||"",r=e?.dataset.taxonomy||"",[s,c]=(0,a.useState)([]),[p,i]=(0,a.useState)(!0),[m,d]=(0,a.useState)(null),[y,x]=(0,a.useState)(1),[u,g]=(0,a.useState)(20),[E,f]=(0,a.useState)(0),[_,h]=(0,a.useState)("");(0,a.useEffect)(()=>{i(!0),d(null);const e=new URLSearchParams({post_type:n,taxonomy:r,page:y.toString(),per_page:u.toString()});_&&e.append("search",_),o()({path:`/cpt-tax-syncer/v1/post-type-relationships?${e.toString()}`}).then(e=>{c(e.relationships||[]),f(e.total||0),i(!1)}).catch(e=>{d(e.message||(0,l.__)("Error loading relationships","cpt-taxonomy-syncer")),i(!1)})},[n,r,y,u,_]);const b=Math.ceil(E/u);return(0,t.createElement)("div",{className:"cpt-tax-post-type-relationships-dashboard"},(0,t.createElement)("div",{className:"cpt-tax-search",style:{marginBottom:"20px",padding:"15px",background:"#fff",border:"1px solid #c3c4c7"}},(0,t.createElement)("label",{htmlFor:"search-input",style:{display:"block",marginBottom:"5px",fontWeight:"600"}},(0,l.__)("Search Posts","cpt-taxonomy-syncer")),(0,t.createElement)("input",{id:"search-input",type:"text",value:_,onChange:e=>{h(e.target.value),x(1)},placeholder:(0,l.__)("Search by post title...","cpt-taxonomy-syncer"),style:{width:"100%",maxWidth:"400px",padding:"5px"}})),p&&(0,t.createElement)("div",{style:{padding:"20px",textAlign:"center"}},(0,t.createElement)("p",null,(0,l.__)("Loading relationships...","cpt-taxonomy-syncer"))),m&&(0,t.createElement)("div",{className:"notice notice-error",style:{padding:"10px"}},(0,t.createElement)("p",null,m)),!p&&!m&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{style:{marginBottom:"10px"}},(0,t.createElement)("p",null,(0,l.__)("Total posts with relationships:","cpt-taxonomy-syncer")," ",(0,t.createElement)("strong",null,E))),0===s.length?(0,t.createElement)("div",{className:"notice notice-info",style:{padding:"15px"}},(0,t.createElement)("p",null,(0,l.__)("No relationships found.","cpt-taxonomy-syncer"))):(0,t.createElement)("div",{className:"cpt-tax-relationships-list"},s.map(e=>(0,t.createElement)("div",{key:e.post.id,className:"cpt-tax-relationship-item",style:{marginBottom:"20px",padding:"15px",background:"#fff",border:"1px solid #c3c4c7",borderLeft:"4px solid #2271b1"}},(0,t.createElement)("div",{className:"cpt-tax-main-post",style:{marginBottom:"15px"}},(0,t.createElement)("h3",{style:{margin:"0 0 10px 0",fontSize:"16px"}},(0,t.createElement)("a",{href:e.post.edit_url,style:{textDecoration:"none",color:"#2271b1"}},e.post.title),(0,t.createElement)("span",{className:"post-state",style:{marginLeft:"10px",fontSize:"12px",fontWeight:"normal",color:"#646970"}},"— ",e.post.post_status)),(0,t.createElement)("div",{style:{fontSize:"13px",color:"#646970",marginBottom:"10px"}},(0,t.createElement)("strong",null,(0,l.__)("Synced Term:","cpt-taxonomy-syncer"))," ",(0,t.createElement)("code",null,e.term.name)," (ID: ",e.term.id,")"),(0,t.createElement)("div",{style:{display:"flex",gap:"5px",flexWrap:"wrap"}},(0,t.createElement)("a",{href:e.post.edit_url,className:"button button-small",target:"_blank",rel:"noopener noreferrer"},(0,l.__)("Edit Post","cpt-taxonomy-syncer")),(0,t.createElement)("a",{href:e.post.view_url,className:"button button-small",target:"_blank",rel:"noopener noreferrer"},(0,l.__)("View Post","cpt-taxonomy-syncer")))),e.related_count>0?(0,t.createElement)("div",{className:"cpt-tax-related-posts",style:{marginLeft:"20px",paddingLeft:"20px",borderLeft:"2px solid #c3c4c7"}},(0,t.createElement)("h4",{style:{margin:"0 0 10px 0",fontSize:"14px",fontWeight:"600"}},(0,l.__)("Related Posts","cpt-taxonomy-syncer")," (",e.related_count,")"),(0,t.createElement)("ul",{style:{margin:"0",paddingLeft:"20px",listStyle:"disc"}},e.related_posts.map(e=>(0,t.createElement)("li",{key:e.id,style:{marginBottom:"8px"}},(0,t.createElement)("a",{href:e.edit_url,style:{textDecoration:"none",color:"#2271b1"},target:"_blank",rel:"noopener noreferrer"},e.title),(0,t.createElement)("span",{style:{marginLeft:"8px",fontSize:"12px",color:"#646970"}},"(",e.post_type," — ",e.post_status,")"),(0,t.createElement)("a",{href:e.view_url,className:"button button-small",style:{marginLeft:"8px"},target:"_blank",rel:"noopener noreferrer"},(0,l.__)("View","cpt-taxonomy-syncer")))))):(0,t.createElement)("div",{style:{marginLeft:"20px",paddingLeft:"20px",color:"#646970",fontSize:"13px",fontStyle:"italic"}},(0,l.__)("No related posts found.","cpt-taxonomy-syncer"))))),b>1&&(0,t.createElement)("div",{className:"tablenav bottom",style:{marginTop:"20px"}},(0,t.createElement)("div",{className:"tablenav-pages"},(0,t.createElement)("span",{className:"displaying-num"},(0,l.__)("Items per page:","cpt-taxonomy-syncer")," ",(0,t.createElement)("select",{value:u,onChange:e=>{g(parseInt(e.target.value,10)),x(1)},style:{margin:"0 5px"}},(0,t.createElement)("option",{value:"10"},"10"),(0,t.createElement)("option",{value:"20"},"20"),(0,t.createElement)("option",{value:"50"},"50"),(0,t.createElement)("option",{value:"100"},"100"))),(0,t.createElement)("span",{className:"pagination-links"},(0,t.createElement)("button",{className:"button",disabled:1===y,onClick:()=>x(1),style:{marginRight:"5px"}},"«"),(0,t.createElement)("button",{className:"button",disabled:1===y,onClick:()=>x(y-1),style:{marginRight:"5px"}},"‹"),(0,t.createElement)("span",{className:"paging-input"},(0,l.__)("Page","cpt-taxonomy-syncer")," ",y," ",(0,l.__)("of","cpt-taxonomy-syncer")," ",b),(0,t.createElement)("button",{className:"button",disabled:y>=b,onClick:()=>x(y+1),style:{marginLeft:"5px"}},"›"),(0,t.createElement)("button",{className:"button",disabled:y>=b,onClick:()=>x(b),style:{marginLeft:"5px"}},"»"))))))}function s(){const e=document.getElementById("cpt-tax-post-type-relationships-dashboard");if(e){const{render:t,createElement:a}=wp.element;t(a(r),e)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s()})();